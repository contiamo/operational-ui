import * as React from "react"
import styled from "react-emotion"
import { OperationalStyleConstants, expandColor } from "../utils/constants"
import { isModifiedEvent } from "../utils"
import { Icon } from ".."
import { Consumer, Context } from "../OperationalUI/OperationalUI"

type WithTheme = { theme?: OperationalStyleConstants }

export interface Props {
  /** Size, in pixels, that the logomark should be */
  size?: number
  /** A color from the constants, or an arbitrary hex value */
  color?: keyof OperationalStyleConstants["color"] | string
  /** Do we want it stacked vertically? */
  stack?: boolean
  /** Link url prop a'la react-router */
  to?: string
  /** Click handler */
  onClick?: (ev: any) => void
}

const containerStyles = ({
  stack,
  color_,
  size_,
  theme,
}: {
  stack?: boolean
  color_?: string
  size_?: number
  theme?: OperationalStyleConstants
}) => `
  padding: 6px;
  width: ${(size_ * 1740) / 360}px;
  height: ${size_}px;
  fill: ${expandColor(theme, color_) || theme.color.white};
`

const Container = styled("div")(containerStyles)

const LinkContainer = styled("a")(containerStyles)

const Svg: React.SFC<{}> = props => (
  <svg viewBox="0 0 1740 360">
    <path d="M93.869,283.579c-31.861,-31.93 -49.275,-78.675 -41.663,-126.448c9.095,-57.083 54.741,-106.57 112.674,-119.197c10.342,-2.254 20.923,-3.352 31.549,-3.335c38.192,0.192 76.071,16.199 103.329,42.946c0.389,0.27 0.607,0.582 0.889,0.883c1.778,1.896 1.982,4.717 -0.104,6.948l0,0.001l-0.001,0.001l-0.006,0.006l-51.919,51.919c-0.862,0.809 -1.22,0.952 -1.885,1.184c-1.42,0.497 -2.913,0.132 -4.109,-0.719c-0.762,-0.372 -1.496,-0.879 -2.156,-1.504c-19.836,-18.528 -52.364,-21.787 -75.812,-6.922c-13.025,8.258 -22.867,21.534 -26.696,36.609c-7.372,29.017 9.762,62.436 39.857,72.714c21.527,7.352 46.688,2.23 63.659,-14.203c0.901,-1.042 2.27,-1.721 3.959,-1.721c0.104,0.006 0.209,0.013 0.313,0.019c1.721,0.218 2.123,0.558 3.065,1.443l51.111,51.11c0.318,0.339 0.566,0.719 0.751,1.126l0.335,0.504l0.378,1.914l-0.384,1.912c-2.542,3.792 -6.593,6.957 -10.411,10.165c-43.029,36.155 -107.286,45.572 -159.303,19.697c-13.554,-6.742 -25.897,-15.671 -36.633,-26.27c-0.292,-0.232 -0.557,-0.494 -0.787,-0.782Zm177.733,-22.445c-1.673,1.564 -3.576,3.103 -5.368,4.55c-30.91,24.96 -74.943,32.906 -112.76,17.18c-11.313,-4.704 -21.735,-11.39 -30.847,-19.572l-17.497,17.497c26.413,23.747 62.281,36.873 98.408,34.767c31.602,-1.843 62.332,-15.13 85.707,-36.778l-17.643,-17.644Zm-26.461,-26.46c-0.976,0.846 -2.007,1.662 -3.007,2.432c-24.638,18.957 -62.085,19.733 -87.789,0.255c-1.094,-0.829 -2.162,-1.691 -3.203,-2.583l-21.552,21.551l0.069,0.06c22.951,20.122 55.428,29.209 85.678,22.83c18.209,-3.84 35.443,-12.829 49.145,-25.204l-19.341,-19.341Zm-159.621,-48.825l-24.862,0c1.479,31.868 14.048,63.442 36.907,87.572c0.129,0.135 0.257,0.27 0.386,0.405l17.537,-17.537c-15.171,-16.25 -25.652,-36.987 -28.931,-59.32c-0.541,-3.688 -0.885,-7.401 -1.037,-11.12Zm1500.15,-82.447c-36.511,0 -75.81,24.001 -75.81,76.7c0,52.815 39.299,76.871 75.81,76.871c36.512,0 75.81,-24.056 75.81,-76.871c0,-52.699 -39.298,-76.7 -75.81,-76.7Zm-1049.9,76.701c0,52.814 39.297,76.87 75.809,76.87c36.514,0 75.811,-24.056 75.811,-76.87c0,-52.7 -39.297,-76.701 -75.811,-76.701c-36.512,0 -75.809,24.001 -75.809,76.701Zm-57.482,-35.201l22.6,-22.599c-13.89,-12.313 -32.804,-18.899 -52.028,-18.899c-10.567,0 -21.227,1.988 -31.206,6.104c-28.273,11.667 -44.487,37.396 -44.487,70.593c0,33.307 16.244,59.105 44.565,70.781c28.109,11.586 61.638,6.246 83.133,-12.837l-22.53,-22.528c-11.692,10.852 -29.079,14.311 -44.648,8.516c-17.499,-6.506 -27.945,-22.928 -27.945,-43.932c0,-20.755 10.372,-37.031 27.745,-43.541c15.61,-5.846 33.051,-2.462 44.801,8.342Zm291.003,109.085l-33.295,0l0,-148.579l19.72,0l73.744,84.017l-0.191,-83.044l33.106,0l0,147.606l-19.528,0l-73.556,-82.418l0,82.418Zm242.751,-147.91l0,27.223l-38.124,0l0,120.384l-31.01,0l0,-120.384l-38.345,0l0,-27.223l107.479,0Zm74.014,-0.001l0,147.608l-31.015,0l0,-147.608l31.015,0Zm130.028,-2.006l64.239,149.614l-33.296,0l-7.561,-19.619l-67.845,0l-7.56,19.619l-33.295,0l64.238,-149.614l21.08,0Zm174.683,72.737l51.929,-71.955l20.723,0l0,148.05l-32.35,0l0.052,-80.279l-36.77,46.53l-6.8,0l-36.744,-46.53l0,80.279l-32.35,0l0,-148.05l20.724,0l51.586,71.955Zm-1264.46,9.042l-30.284,0c1.147,22.858 9.795,45.62 26.402,63.507l21.613,-21.613c-10.14,-11.566 -16.557,-26.423 -17.731,-41.894Zm528.734,-5.746c0,30.655 -21.805,46.694 -43.348,46.694c-21.54,0 -43.347,-16.039 -43.347,-46.694c0,-30.434 21.807,-46.359 43.347,-46.359c21.543,0 43.348,15.925 43.348,46.359Zm930.742,46.694c-21.54,0 -43.349,-16.039 -43.349,-46.695c0,-30.433 21.809,-46.359 43.349,-46.359c21.54,0 43.349,15.926 43.349,46.359c0,30.656 -21.809,46.695 -43.349,46.695Zm-355.927,-18.392l-24.581,-55.835l-23.973,55.835l48.554,0Zm-939.999,-126.48c-0.422,-0.401 -0.848,-0.799 -1.278,-1.189c-38.329,-34.694 -96.652,-46.086 -145.353,-25.477c-36.914,15.621 -66.175,48.285 -77.459,87.024c-3.178,10.915 -4.901,22.211 -5.204,33.566l25.015,0c1.343,-26.307 12.107,-52.181 30.551,-71.422c20.338,-21.217 49.456,-33.789 78.99,-34.018c0.352,-0.001 0.705,-0.002 1.057,-0.001c27.59,0.138 54.653,11.136 75.223,29.975l18.458,-18.458Zm-25.541,25.541c-23.22,-20.96 -56.015,-31.199 -87.184,-25.319c-25.374,4.787 -48.633,19.859 -63.554,41.074c-10.779,15.326 -16.725,33.771 -17.58,52.628l30.291,0c1.976,-26.808 20.269,-51.774 46.23,-61.538c8.272,-3.111 17.053,-4.646 25.98,-4.619c16.874,0.151 33.581,6.19 46.436,17.155l19.381,-19.381Z" />
  </svg>
)

const ContiamoLogo: React.SFC<Props> = ({ size, color, stack, to, ...props }) => {
  if (!to) {
    return (
      <Container size_={size} color_={color} stack={stack} {...props}>
        <Svg />
      </Container>
    )
  }
  return (
    <Consumer>
      {ctx => (
        <LinkContainer
          size_={size}
          color_={color}
          stack={stack}
          {...props}
          href={to}
          onClick={(ev: React.MouseEvent<HTMLAnchorElement>) => {
            props.onClick && props.onClick(ev)

            if (!isModifiedEvent(ev) && to && ctx.pushState) {
              ev.preventDefault()
              ctx.pushState(to)
            }
          }}
        >
          <Svg />
        </LinkContainer>
      )}
    </Consumer>
  )
}

ContiamoLogo.defaultProps = {
  size: 50,
  color: "white",
  stack: false,
}

export default ContiamoLogo
